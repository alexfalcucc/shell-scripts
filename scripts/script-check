#!/bin/bash
set -euo pipefail

task="Opening apps and websites to check based on day/time"

script-log state "$task"

work_items=(
  "/Applications/Calendar.app"
  "https://mail.google.com"
  "https://roederstudios.slack.com"
)

personal_items=(
  "/Applications/Calendar.app"
  "/Applications/Messages.app"
  "https://www.icloud.com/#mail"
  "https://utahjavascript.slack.com"
  "https://twitter.com"
  "https://www.facebook.com"
)

if [[ $(date +%u) -lt 6 ]] ; then
  HOUR=$(date +%H)
  if (( 9 <= 10#$HOUR && 10#$HOUR < 17 )); then 
    echo 'Opening work items to check'
    items=("${work_items[@]}")
  else
    echo 'Opening personal items to check'
    items=("${personal_items[@]}")
  fi
else
  echo 'Opening personal items to check'
  items=("${personal_items[@]}")
fi

for item in "${items[@]}"; do
  open "$item"
done

script-log state "DONE $task"
